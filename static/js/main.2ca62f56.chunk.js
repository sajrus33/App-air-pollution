(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),c=n.n(o),i=(n(85),n(25)),l=n.n(i),s=n(40),u=n(60),m=n(26),p=n(73),f=n(61),h=n(71),d=n(68),g=n.n(d),b=n(150),v=n(151),y=n(148),E=n(103),w=n(65),A=n.n(w),S=n(146),k=n(70),x=n(48),O=n(72),N=n(69),P=n(36),j=n(149),C=n(161),I=n(102),W=n(163),D=[{label:"France"},{label:"Germany"},{label:"Spain"},{label:"Poland"}].map(function(e){return{value:e.label,label:e.label}}),T=Object(S.a)(function(e){return{root:{flexGrow:1,marginTop:15,backgroundColor:"white"},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:18},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16},paper:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0}}});function F(e){var t=e.inputRef,n=Object(O.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},n))}var R={Control:function(e){var t=e.children,n=e.innerProps,a=e.innerRef,o=e.selectProps,c=o.classes,i=o.TextFieldProps;return r.a.createElement(C.a,Object.assign({fullWidth:!0,InputProps:{inputComponent:F,inputProps:Object(x.a)({className:c.input,ref:a,children:t},n)}},i))},Menu:function(e){return r.a.createElement(I.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},NoOptionsMessage:function(e){return r.a.createElement(y.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(W.a,Object.assign({ref:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(y.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(y.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}};function B(e){var t=T(),n=Object(P.a)(),a=r.a.useState(null),o=Object(k.a)(a,2),c=o[0],i=o[1];var l={input:function(e){return Object(x.a)({},e,{color:n.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(j.a,null,r.a.createElement(N.a,{classes:t,styles:l,inputId:"react-select-single",TextFieldProps:{label:"Country",InputLabelProps:{htmlFor:"react-select-single",shrink:!0}},placeholder:"Search a country",options:D,components:R,value:c,onChange:function(t){i(t),e.onChangeSearch(t)}})))}var z=Object(S.a)(function(e){return{bar:{backgroundColor:"#4caf50",paddingTop:15,marginBottom:15,position:"sticky"},h1:{fontSize:"2.5em",fontWeight:600,color:"#000",marginRight:"auto"},barBtn:{fontSize:"26"},barIco:{color:"#4caf50",fontSize:32}}}),L=function(e){var t=z();return r.a.createElement(b.a,{className:t.bar},r.a.createElement(v.a,null,r.a.createElement(y.a,{variant:"h1",className:t.h1},"High air pollution !"),r.a.createElement(E.a,{"aria-label":"Scroll up",onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},className:t.barBtn,style:{backgroundColor:"black"}},r.a.createElement(A.a,{className:t.barIco}))),r.a.createElement(B,{onChangeSearch:e.onChangeSearch}))},M=function(e){var t=[],n=[],a=e[0].city;e.forEach(function(r,o){var c=[];if(r.measurements.forEach(function(e){var t={};t[e.parameter]=e.value,c.push(t)}),r.city===a)n.push(c);else{var i={};i.name=a,i.locations=n,t.push(i),(n=[]).push(c),a=r.city}if(o===e.length-1){var l={};l.name=r.city,l.locations=n,t.push(l)}});var r=[];t.forEach(function(e,t){var n;e.locations.forEach(function(e,t){n={pm25:0,pm25Amount:0,pm10:0,pm10Amount:0,co:0,coAmount:0,o3:0,o3Amount:0,bc:0,bcAmount:0,so2:0,so2Amount:0,no2:0,no2Amount:0},e[t]&&e[t].pm25&&(n.pm25+=e[t].pm25,n.pm25Amount+=1),e[t]&&e[t].pm10&&(n.pm10+=e[t].pm10,n.pm10Amount+=1),e[t]&&e[t].co&&(n.co+=e[t].co,n.coAmount+=1),e[t]&&e[t].o3&&(n.o3+=e[t].o3,n.o3Amount+=1),e[t]&&e[t].bc&&(n.bc+=e[t].bc,n.bcAmount+=1),e[t]&&e[t].so2&&(n.so2+=e[t].so2,n.so2Amount+=1),e[t]&&e[t].no2&&(n.no2+=e[t].no2,n.no2Amount+=1)});var a=function(e){return e||1};n.pm25Amount=a(n.pm25Amount),n.pm10Amount=a(n.pm10Amount),n.coAmount=a(n.coAmount),n.o3Amount=a(n.o3Amount),n.bcAmount=a(n.bcAmount),n.so2Amount=a(n.so2Amount),n.no2Amount=a(n.no2Amount),r[t]=[n.pm25/n.pm25Amount,n.pm10/n.pm10Amount,n.co/n.coAmount,n.o3/n.o3Amount,n.bc/n.bcAmount,n.so2/n.so2Amount,n.no2/n.no2Amount,e.name]});var o=[];r.forEach(function(e,t){o[t]={value:0},o[t].index=t;for(var n=0;n<6;n++)o[t].value+=e[n]}),o.sort(function(e,t){return t.value-e.value}),o.splice(10);var c=[];return o.forEach(function(e){c.push(r[e.index])}),c},q=n(164),J=n(153),G=n(154),U=n(162),V=n(155),X=n(159),H=n(158),$=n(156),_=n(157),K=n(152),Q=n(67),Y=n.n(Q),Z=Object(S.a)(function(e){return{root:{width:"100%",overflowX:"hidden"},panelSummary:{fontWeight:700},heading:{fontSize:e.typography.pxToRem(17),fontWeight:600},table:{minWidth:"650",overflowX:"auto"}}}),ee=function(e){var t=Z();return r.a.createElement(K.a,{in:e.showed,timeout:400},r.a.createElement(I.a,{className:t.root},r.a.createElement(q.a,{className:t.panelExpansion},r.a.createElement(J.a,{className:t.panelSummary,expandIcon:r.a.createElement(Y.a,null),"aria-controls":"panel"+e.index+"a-content",id:"panel"+e.index+"a-header"},r.a.createElement(y.a,{variant:"h2",className:t.heading}," ",e.cityName)),r.a.createElement(G.a,null,r.a.createElement(U.a,{display:"flex",flexDirection:"column",style:{overflowX:"auto"}},r.a.createElement(y.a,{style:{marginBottom:"15px"}},e.cityDescribe),r.a.createElement(U.a,{display:"flex",flexDirection:"column",style:{overflowX:"auto"}},r.a.createElement(V.a,{className:t.table},r.a.createElement($.a,null,r.a.createElement(_.a,null,r.a.createElement(H.a,{align:"left"},"PM25"),r.a.createElement(H.a,{align:"left"},"PM10"),r.a.createElement(H.a,{align:"left"},"CO"),r.a.createElement(H.a,{align:"left"},"O3"),r.a.createElement(H.a,{align:"left"},"BC"),r.a.createElement(H.a,{align:"left"},"SO2"),r.a.createElement(H.a,{align:"left"},"NO2"))),r.a.createElement(X.a,null,r.a.createElement(_.a,{key:"row"},r.a.createElement(H.a,{align:"left"},e.pm25," \xb5g/m\xb3"),r.a.createElement(H.a,{align:"left"},e.pm10," \xb5g/m\xb3"),r.a.createElement(H.a,{align:"left"},e.co," \xb5g/m\xb3"),r.a.createElement(H.a,{align:"left"},e.o3," \xb5g/m\xb3"),r.a.createElement(H.a,{align:"left"},e.bc," \xb5g/m\xb3"),r.a.createElement(H.a,{align:"left"},e.so2," \xb5g/m\xb3"),r.a.createElement(H.a,{align:"left"},e.no2," \xb5g/m\xb3"))))))))))},te=n(160),ne=Object(S.a)(function(e){return{progress:{position:"fixed",left:"calc(50% - 20px)",top:"calc(50% + 80px)",color:"#4caf50"}}}),ae=function(e){var t,n=ne(),a=[];t=e.showed?"none":"block";return e.cities.forEach(function(t,o){var c=e.cities[o][0],i=e.cities[o][1],l=e.cities[o][2],s=e.cities[o][3],u=e.cities[o][4],m=e.cities[o][5],p=e.cities[o][6],f=e.cities[o][7];a.push(r.a.createElement(ee,{classes:n,showed:e.showed,key:o,index:o,cityName:f,cityDescribe:"  \n                        Latest air pollution measurement in ".concat(e.country,".\n                     "),pm25:c,pm10:i,co:l,o3:s,bc:u,so2:m,no2:p}))}),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h4",align:"center",paragraph:!0},e.country?e.country:e.error),r.a.createElement("div",null,r.a.createElement(te.a,{style:{display:t},className:n.progress}),a))},re=(n(97),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={cities:[],countryInput:null,countryName:null,error:null,AccordionShowed:!0},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"getData",value:function(){var e=Object(s.a)(l.a.mark(function e(){var t,n,a,r,o,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=M,n=this.state.countryInput,a="https://api.openaq.org/v1/latest?country=".concat(n,"&order_by=city&limit=10000"),e.next=5,fetch(a);case 5:if(!(r=e.sent).ok){e.next=19;break}return localStorage.setItem("localDataCountry",JSON.stringify(this.state.countryInput)),e.next=10,r.json();case 10:if(!(o=e.sent).results){e.next=17;break}return e.next=14,t(o.results);case 14:c=e.sent,this.setState({cities:c,error:null}),localStorage.setItem("localData",JSON.stringify(c));case 17:e.next=20;break;case 19:this.setState({error:r.statusText});case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(localStorage.getItem("localData")),n=JSON.parse(localStorage.getItem("localDataCountry")),!t){e.next=17;break}a=n,e.t0=a,e.next="FR"===e.t0?7:"DE"===e.t0?9:"PL"===e.t0?11:"SP"===e.t0?13:15;break;case 7:return a="France",e.abrupt("break",16);case 9:return a="Germany",e.abrupt("break",16);case 11:return a="Poland",e.abrupt("break",16);case 13:return a="Spain",e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:this.setState({countryName:a,cities:t});case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onChangeSearch",value:function(){var e=Object(s.a)(l.a.mark(function e(t){var n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.value,a=this.state.countryInput,e.t0=n,e.next="France"===e.t0?5:"Germany"===e.t0?7:"Poland"===e.t0?9:"Spain"===e.t0?11:13;break;case 5:return a="FR",e.abrupt("break",14);case 7:return a="DE",e.abrupt("break",14);case 9:return a="PL",e.abrupt("break",14);case 11:return a="ES",e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:if(a===this.state.countryInput){e.next=20;break}return e.next=17,this.setState({countryInput:a,AccordionShowed:!1,countryName:n});case 17:return e.next=19,this.getData();case 19:this.setState({AccordionShowed:!0});case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null,r.a.createElement("title",null,"Top 10 air pollution city"),r.a.createElement("meta",{name:"description",content:"Top 10 air-polluted cities in Europe. Latest air quality\r measure in European Union. App show true quality of European country."}),r.a.createElement("meta",{name:"keywords",content:"air, quality, pollution, latest, tests"}),r.a.createElement("meta",{property:"og:title",content:"Air quality"}),r.a.createElement("meta",{name:"author",content:"Brian Wala"})),r.a.createElement(L,{onChangeSearch:this.onChangeSearch.bind(this)}),r.a.createElement(ae,{country:this.state.countryName,cities:this.state.cities,showed:this.state.AccordionShowed,error:this.state.error}))}}]),t}(a.Component)),oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(re,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/App-air-pollution",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/App-air-pollution","/service-worker.js");oe?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ce(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ce(t,e)})}}()},80:function(e,t,n){e.exports=n(101)},85:function(e,t,n){},97:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.2ca62f56.chunk.js.map
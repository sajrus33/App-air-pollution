(this["webpackJsonpair-quality"]=this["webpackJsonpair-quality"]||[]).push([[0],{75:function(e,t,a){e.exports=a(90)},80:function(e,t,a){},86:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),l=(a(80),a(22)),i=a.n(l),s=a(40),u=a(55),p=a(56),m=a(64),f=a(57),h=a(65),b=a(61),d=a.n(b),g=a(138),y=a(139),E=a(135),v=a(92),w=a(59),k=a.n(w),S=a(133),x=a(63),O=a(46),N=a(66),A=a(62),j=a(14),C=a(137),P=a(149),I=a(91),W=a(153),M=[{label:"France"},{label:"Germany"},{label:"Spain"},{label:"Poland"}].map((function(e){return{value:e.label,label:e.label}})),D=Object(S.a)((function(e){return{root:{flexGrow:1,marginTop:15,backgroundColor:"white"},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:18},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16},paper:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0}}}));function T(e){var t=e.inputRef,a=Object(N.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},a))}var F={Control:function(e){var t=e.children,a=e.innerProps,n=e.innerRef,o=e.selectProps,c=o.classes,l=o.TextFieldProps;return r.a.createElement(P.a,Object.assign({fullWidth:!0,InputProps:{inputComponent:T,inputProps:Object(O.a)({className:c.input,ref:n,children:t},a)}},l))},Menu:function(e){return r.a.createElement(I.a,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},NoOptionsMessage:function(e){return r.a.createElement(E.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(W.a,Object.assign({ref:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(E.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(E.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}};function R(e){var t=D(),a=Object(j.a)(),n=r.a.useState(null),o=Object(x.a)(n,2),c=o[0],l=o[1];var i={input:function(e){return Object(O.a)({},e,{color:a.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(C.a,null,r.a.createElement(A.a,{isClearable:!0,classes:t,styles:i,inputId:"react-select-single",TextFieldProps:{label:"Country",InputLabelProps:{htmlFor:"react-select-single",shrink:!0}},placeholder:"Search a country",options:M,components:F,value:c,onChange:function(t){l(t),e.onChangeSearch(t)}})))}var q=Object(S.a)((function(){return{bar:{backgroundColor:"#4caf50",paddingTop:15,marginBottom:15,position:"sticky"},h1:{fontSize:"2.5em",fontWeight:600,color:"#000",marginRight:"auto"},barBtn:{fontSize:"26"},barIco:{color:"#4caf50",fontSize:32}}})),B=function(e){var t=q();return r.a.createElement(g.a,{className:t.bar},r.a.createElement(y.a,null,r.a.createElement(E.a,{variant:"h1",className:t.h1},"High air pollution !"),r.a.createElement(v.a,{"aria-label":"Scroll up",onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},className:t.barBtn,style:{backgroundColor:"black"}},r.a.createElement(k.a,{className:t.barIco}))),r.a.createElement(R,{onChangeSearch:e.onChangeSearch}))},z=function(e){var t=[],a=[],n=e[0].city;e.forEach((function(r,o){var c=[];if(r.measurements.forEach((function(e){var t={};t[e.parameter]=e.value,c.push(t)})),r.city===n)a.push(c);else{var l={};l.name=n,l.locations=a,t.push(l),(a=[]).push(c),n=r.city}if(o===e.length-1){var i={};i.name=r.city,i.locations=a,t.push(i)}}));var r=[];t.forEach((function(e,t){var a={pm25:0,pm25Amount:0,pm10:0,pm10Amount:0,co:0,coAmount:0,o3:0,o3Amount:0,bc:0,bcAmount:0,so2:0,so2Amount:0,no2:0,no2Amount:0};e.locations.forEach((function(e){e.forEach((function(e){switch(Object.getOwnPropertyNames(e)[0]){case"pm25":a.pm25+=e.pm25,a.pm25Amount+=1;break;case"pm10":a.pm10+=e.pm10,a.pm10Amount+=1;break;case"co":a.co+=e.co,a.coAmount+=1;break;case"o3":a.o3+=e.o3,a.o3Amount+=1;break;case"bc":a.bc+=e.bc,a.bcAmount+=1;break;case"so2":a.so2+=e.so2,a.so2Amount+=1;break;case"no2":a.no2+=e.no2,a.no2Amount+=1}}))}));Object.keys(a).forEach((function(e){e.includes("Amount")&&(a[e]=a[e]||1)})),r[t]={pm25:Math.floor(a.pm25/a.pm25Amount),pm10:Math.floor(a.pm10/a.pm10Amount),co:Math.floor(a.co/a.coAmount),o3:Math.floor(a.o3/a.o3Amount),bc:Math.floor(a.bc/a.bcAmount),so2:Math.floor(a.so2/a.so2Amount),no2:Math.floor(a.no2/a.no2Amount),cityName:e.name}}));var o=[];r.forEach((function(e,t){var a=0;Object.entries(e).forEach((function(e){"cityName"!==e[0]&&(a+=e[1])})),o.push({value:a,index:t})})),o.sort((function(e,t){return t.value-e.value})),o.splice(10);var c=[];return o.forEach((function(e){c.push(r[e.index])})),c},L=a(151),J=a(141),G=a(142),U=a(150),V=a(143),X=a(147),H=a(146),$=a(144),_=a(145),K=a(140),Q=a(60),Y=a.n(Q),Z=Object(S.a)((function(e){return{paper:{width:"100%",overflowX:"hidden"},panelSummary:{fontWeight:700},h2:{fontSize:e.typography.pxToRem(17),fontWeight:600},table:{minWidth:"650",overflowX:"auto"},pCityDescribe:{marginBottom:"15px"}}})),ee=function(e){var t=e.city,a=e.country,n=e.showed,o=Z(),c=t.cityName,l=t.pm25,i=t.pm10,s=t.co,u=t.o3,p=t.bc,m=t.so2,f=t.no2;return r.a.createElement(K.a,{in:n,timeout:400},r.a.createElement(I.a,{className:o.paper},r.a.createElement(L.a,{className:o.panelExpansion},r.a.createElement(J.a,{className:o.panelSummary,expandIcon:r.a.createElement(Y.a,null),"aria-controls":"panel".concat(c,"a-content"),id:"panel".concat(c,"a-header")},r.a.createElement(E.a,{variant:"h2",className:o.h2},c)),r.a.createElement(G.a,null,r.a.createElement(U.a,{display:"flex",flexDirection:"column",style:{overflowX:"auto"}},r.a.createElement(E.a,{className:o.pCityDescribe},"Latest air pollution measurement in ".concat(a,".")),r.a.createElement(U.a,{display:"flex",flexDirection:"column"},r.a.createElement(V.a,{className:o.table},r.a.createElement($.a,null,r.a.createElement(_.a,null,r.a.createElement(H.a,{align:"left"},"PM25"),r.a.createElement(H.a,{align:"left"},"PM10"),r.a.createElement(H.a,{align:"left"},"CO"),r.a.createElement(H.a,{align:"left"},"O3"),r.a.createElement(H.a,{align:"left"},"BC"),r.a.createElement(H.a,{align:"left"},"SO2"),r.a.createElement(H.a,{align:"left"},"NO2"))),r.a.createElement(X.a,null,r.a.createElement(_.a,{key:"row"},r.a.createElement(H.a,{align:"left"},"".concat(l," \xb5g/m\xb3")),r.a.createElement(H.a,{align:"left"},"".concat(i," \xb5g/m\xb3")),r.a.createElement(H.a,{align:"left"},"".concat(s," \xb5g/m\xb3")),r.a.createElement(H.a,{align:"left"},"".concat(u," \xb5g/m\xb3")),r.a.createElement(H.a,{align:"left"},"".concat(p," \xb5g/m\xb3")),r.a.createElement(H.a,{align:"left"},"".concat(m," \xb5g/m\xb3")),r.a.createElement(H.a,{align:"left"},"".concat(f," \xb5g/m\xb3")))))))))))},te=a(148),ae=Object(S.a)((function(){return{progress:{position:"fixed",left:"calc(50% - 20px)",top:"calc(50% + 80px)",color:"#4caf50"}}})),ne=function(e){var t=e.cities,a=e.country,n=e.error,o=e.showed,c=ae(),l=o?"none":"block";return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{variant:"h4",align:"center",paragraph:!0},a||n),r.a.createElement("div",null,r.a.createElement(te.a,{style:{display:l},className:c.progress}),t.map((function(e){return r.a.createElement(ee,{city:e,showed:o,key:"city".concat(e.cityName),country:a})}))))},re=(a(86),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={cities:[],countryInput:null,countryName:null,error:null,accordionIsShowed:!0},a.onChangeSearch=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=21;break}n=t.value,e.t0=n,e.next="France"===e.t0?5:"Germany"===e.t0?7:"Poland"===e.t0?9:"Spain"===e.t0?11:13;break;case 5:return r="FR",e.abrupt("break",14);case 7:return r="DE",e.abrupt("break",14);case 9:return r="PL",e.abrupt("break",14);case 11:return r="ES",e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:if(o=a.state.countryInput,r===o){e.next=21;break}return e.next=18,a.setState({countryInput:r,accordionIsShowed:!1,countryName:n});case 18:return e.next=20,a.getData();case 20:a.setState({accordionIsShowed:!0});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(localStorage.getItem("localData")),a=JSON.parse(localStorage.getItem("localDataCountry")),!t){e.next=17;break}n=a,e.t0=n,e.next="FR"===e.t0?7:"DE"===e.t0?9:"PL"===e.t0?11:"ES"===e.t0?13:15;break;case 7:return n="France",e.abrupt("break",16);case 9:return n="Germany",e.abrupt("break",16);case 11:return n="Poland",e.abrupt("break",16);case 13:return n="Spain",e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:this.setState({countryName:n,cities:t});case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.countryInput,a="https://api.openaq.org/v1/latest?country=".concat(t,"&order_by=city&limit=10000"),e.next=4,fetch(a);case 4:if(!(n=e.sent).ok){e.next=18;break}return localStorage.setItem("localDataCountry",JSON.stringify(this.state.countryInput)),e.next=9,n.json();case 9:if(!(r=e.sent).results){e.next=16;break}return e.next=13,z(r.results);case 13:o=e.sent,this.setState({cities:o,error:null}),localStorage.setItem("localData",JSON.stringify(o));case 16:e.next=19;break;case 18:this.setState({error:n.statusText});case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.cities,a=e.accordionIsShowed,n=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement("title",null,"Top 10 air pollution city"),r.a.createElement("meta",{name:"description",content:"Top 10 air-polluted cities in Europe. Latest air quality measure in European Union. App show true quality of European country."}),r.a.createElement("meta",{name:"keywords",content:"air, quality, pollution, latest, tests"}),r.a.createElement("meta",{property:"og:title",content:"Air quality"}),r.a.createElement("meta",{name:"author",content:"Brian Wala"})),r.a.createElement(B,{onChangeSearch:this.onChangeSearch}),r.a.createElement(ne,{cities:t,showed:a,error:n}))}}]),t}(n.Component)),oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(re,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/App-air-pollution",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/App-air-pollution","/service-worker.js");oe?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ce(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ce(t,e)}))}}()}},[[75,1,2]]]);
//# sourceMappingURL=main.db0e9b8d.chunk.js.map